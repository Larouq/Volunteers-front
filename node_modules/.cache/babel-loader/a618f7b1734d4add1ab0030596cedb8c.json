{"ast":null,"code":"import _regeneratorRuntime from \"/Users/adotmob/Documents/opc/volunteers/Volunteers-front/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/Users/adotmob/Documents/opc/volunteers/Volunteers-front/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/Users/adotmob/Documents/opc/volunteers/Volunteers-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/adotmob/Documents/opc/volunteers/Volunteers-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/adotmob/Documents/opc/volunteers/Volunteers-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/adotmob/Documents/opc/volunteers/Volunteers-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/adotmob/Documents/opc/volunteers/Volunteers-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/adotmob/Documents/opc/volunteers/Volunteers-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/adotmob/Documents/opc/volunteers/Volunteers-front/src/Layout/Header.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Form, Row, Col, Button, Alert } from \"react-bootstrap\";\nimport { slide as Menu } from \"react-burger-menu\";\nimport { submitAuthentification } from \"../api/backendApi.js\";\nimport \"./Layout.scss\";\nimport { withRouter } from \"react-router\";\nimport ModalCreateRequest from \"../Modal_createRequest/modalRequest\";\nimport ModalUserRequest from \"../Modal_userRequest/modalUserRequest\";\n\nvar Header =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Header, _Component);\n\n  function Header(props) {\n    var _this;\n\n    _classCallCheck(this, Header);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Header).call(this, props));\n\n    _this.listenScrollEvent = function (e) {\n      if (window.scrollY > 50) {\n        _this.setState({\n          color: \"rgba(0, 0, 0, 0.6)\"\n        });\n      } else {\n        _this.setState({\n          color: \"black\"\n        });\n      }\n    };\n\n    _this.listenResizeEvent = function (e) {\n      if (window.innerWidth < 1024) {\n        _this.setState({\n          displayBurger: false\n        });\n      } else {\n        _this.setState({\n          displayBurger: true\n        });\n      }\n    };\n\n    _this.checkValidEmail = function (email) {\n      var emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@]+(\\.[^<>()[\\]\\\\.,;:\\s@]+)*)|)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n      if (email.length > 0) {\n        return emailRegex.test(email);\n      }\n\n      return false;\n    };\n\n    _this.handleChangeEmail = function (elem) {\n      _this.setState({\n        email: elem.target.value\n      });\n    };\n\n    _this.handleChangePassword = function (elem) {\n      _this.setState({\n        password: elem.target.value\n      });\n    };\n\n    _this.state = {\n      email: \"\",\n      password: \"\",\n      user: {},\n      openModal: false,\n      openModalUserRequest: false,\n      openAlert: false,\n      displayBurger: true,\n      openModalLogin: false\n    };\n    return _this;\n  }\n\n  _createClass(Header, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener(\"scroll\", this.listenScrollEvent);\n      window.addEventListener(\"resize\", this.listenResizeEvent);\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function () {\n      var _handleSubmit = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var user;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return submitAuthentification(_objectSpread({}, this.state));\n\n              case 2:\n                user = _context.sent;\n                this.setState({\n                  user: user\n                });\n                if (this.state.user.status === 401) this.setState({\n                  openAlert: true\n                });\n\n                if (user) {\n                  this.props.history.push(\"/location\");\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function handleSubmit() {\n        return _handleSubmit.apply(this, arguments);\n      }\n\n      return handleSubmit;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var isMenuOpen = function isMenuOpen(state) {\n        return state.isOpen;\n      };\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: \"App-header\",\n        style: {\n          background: \"black\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"nav\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(Link, {\n        style: {\n          textDecoration: \"none\"\n        },\n        to: this.state.user ? \"/location\" : \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Volunteers\")), React.createElement(\"div\", {\n        className: \"navbar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, !localStorage.authentication_token ? React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: 5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        onChange: this.handleChangeEmail,\n        isValid: this.checkValidEmail(this.state.email),\n        isInvalid: this.state.email && !this.checkValidEmail(this.state.email),\n        type: \"text\",\n        placeholder: \"Email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      })), React.createElement(Col, {\n        xs: 5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        onChange: this.handleChangePassword,\n        isValid: this.state.password.length > 5,\n        type: \"Password\",\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      })), React.createElement(Col, {\n        xs: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"success\",\n        onClick: function onClick() {\n          _this2.handleSubmit();\n        },\n        disabled: !this.state.email || !this.state.password || !this.checkValidEmail(this.state.email),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"login\"), React.createElement(Button, {\n        variant: \"success\",\n        onClick: function onClick() {\n          _this2.handleSubmit();\n        },\n        disabled: !this.state.email || !this.state.password || !this.checkValidEmail(this.state.email),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"test\")))) : this.state.displayBurger ? React.createElement(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"row\",\n          alignItems: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"navlink\",\n        style: {\n          marginRight: \"20px\"\n        },\n        onClick: function onClick() {\n          return _this2.setState({\n            openModalUserRequest: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"my resquest\"), React.createElement(\"div\", {\n        className: \"navlink\",\n        onClick: function onClick() {\n          return _this2.setState({\n            openModal: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"create request\"), React.createElement(\"div\", {\n        className: \"navlink\",\n        style: {\n          marginLeft: \"20px\"\n        },\n        onClick:\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee2() {\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return localStorage.clear();\n\n                case 2:\n                  _this2.setState({\n                    email: \"\",\n                    password: \"\"\n                  });\n\n                  _this2.props.history.push(\"/\");\n\n                case 4:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        })),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"log out\")) : React.createElement(Menu, {\n        className: \"bm-menu-wrap\",\n        right: true,\n        onStateChange: isMenuOpen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"menu-item\",\n        onClick: function onClick() {\n          return _this2.setState({\n            openModal: true\n          });\n        },\n        style: {\n          cursor: \"pointer\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, \"create request\"), React.createElement(\"div\", {\n        className: \"menu-item\",\n        style: {\n          marginLeft: \"20px\",\n          cursor: \"pointer\"\n        },\n        onClick:\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee3() {\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  _context3.next = 2;\n                  return localStorage.clear();\n\n                case 2:\n                  _this2.setState({\n                    email: \"\",\n                    password: \"\"\n                  });\n\n                  _this2.props.history.push(\"/\");\n\n                case 4:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3);\n        })),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \"log out\")), React.createElement(ModalCreateRequest, {\n        show: this.state.openModal,\n        onHide: function onHide() {\n          return _this2.setState({\n            openModal: false\n          });\n        },\n        onCloseModal: function onCloseModal() {\n          return _this2.setState({\n            openModal: false\n          });\n        },\n        userId: localStorage.user_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }), React.createElement(ModalUserRequest, {\n        show: this.state.openModalUserRequest,\n        onHide: function onHide() {\n          _this2.setState({\n            openModalUserRequest: false\n          });\n        },\n        onCloseModal: function onCloseModal() {\n          _this2.setState({\n            openModalUserRequest: false\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      })))), this.state.openAlert && React.createElement(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"flex-end\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(Alert, {\n        variant: \"danger\",\n        onClose: function onClose() {\n          return _this2.setState({\n            openAlert: false\n          });\n        },\n        dismissible: true,\n        style: {\n          width: \"400px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, React.createElement(Alert.Heading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, \"Authentification failed\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, \"Invalid login credentials. Please try again\"))));\n    }\n  }]);\n\n  return Header;\n}(Component);\n\nexport default withRouter(Header);","map":{"version":3,"sources":["/Users/adotmob/Documents/opc/volunteers/Volunteers-front/src/Layout/Header.js"],"names":["React","Component","Link","Form","Row","Col","Button","Alert","slide","Menu","submitAuthentification","withRouter","ModalCreateRequest","ModalUserRequest","Header","props","listenScrollEvent","e","window","scrollY","setState","color","listenResizeEvent","innerWidth","displayBurger","checkValidEmail","email","emailRegex","length","test","handleChangeEmail","elem","target","value","handleChangePassword","password","state","user","openModal","openModalUserRequest","openAlert","openModalLogin","addEventListener","status","history","push","isMenuOpen","isOpen","background","textDecoration","localStorage","authentication_token","handleSubmit","display","flexDirection","alignItems","marginRight","marginLeft","clear","cursor","user_id","justifyContent","width"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Form, Row, Col, Button, Alert } from \"react-bootstrap\";\nimport { slide as Menu } from \"react-burger-menu\";\nimport { submitAuthentification } from \"../api/backendApi.js\";\nimport \"./Layout.scss\";\nimport { withRouter } from \"react-router\";\nimport ModalCreateRequest from \"../Modal_createRequest/modalRequest\";\nimport ModalUserRequest from \"../Modal_userRequest/modalUserRequest\";\n\nclass Header extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      password: \"\",\n      user: {},\n      openModal: false,\n      openModalUserRequest: false,\n      openAlert: false,\n      displayBurger: true,\n      openModalLogin: false\n    };\n  }\n\n  listenScrollEvent = e => {\n    if (window.scrollY > 50) {\n      this.setState({ color: \"rgba(0, 0, 0, 0.6)\" });\n    } else {\n      this.setState({ color: \"black\" });\n    }\n  };\n\n  listenResizeEvent = e => {\n    if (window.innerWidth < 1024) {\n      this.setState({ displayBurger: false });\n    } else {\n      this.setState({ displayBurger: true });\n    }\n  };\n\n  componentDidMount() {\n    window.addEventListener(\"scroll\", this.listenScrollEvent);\n    window.addEventListener(\"resize\", this.listenResizeEvent);\n  }\n\n  checkValidEmail = email => {\n    const emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@]+(\\.[^<>()[\\]\\\\.,;:\\s@]+)*)|)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n    if (email.length > 0) {\n      return emailRegex.test(email);\n    }\n\n    return false;\n  };\n\n  handleChangeEmail = elem => {\n    this.setState({ email: elem.target.value });\n  };\n\n  handleChangePassword = elem => {\n    this.setState({ password: elem.target.value });\n  };\n\n  async handleSubmit() {\n    const user = await submitAuthentification({ ...this.state });\n    this.setState({ user });\n    if (this.state.user.status === 401) this.setState({ openAlert: true });\n    if (user) {\n      this.props.history.push(\"/location\");\n    }\n  }\n\n  render() {\n    const isMenuOpen = function(state) {\n      return state.isOpen;\n    };\n    return (\n      <div>\n        <header className=\"App-header\" style={{ background: \"black\" }}>\n          <nav>\n            <Link\n              style={{ textDecoration: \"none\" }}\n              to={this.state.user ? \"/location\" : \"/\"}\n            >\n              <h1 className=\"name\">Volunteers</h1>\n            </Link>\n            <div className=\"navbar\">\n              {!localStorage.authentication_token ? (\n                <Form>\n                  <Row>\n                    <Col xs={5}>\n                      <Form.Control\n                        onChange={this.handleChangeEmail}\n                        isValid={this.checkValidEmail(this.state.email)}\n                        isInvalid={\n                          this.state.email &&\n                          !this.checkValidEmail(this.state.email)\n                        }\n                        type=\"text\"\n                        placeholder=\"Email\"\n                      />\n                    </Col>\n                    <Col xs={5}>\n                      <Form.Control\n                        onChange={this.handleChangePassword}\n                        isValid={this.state.password.length > 5}\n                        type=\"Password\"\n                        placeholder=\"Password\"\n                      />\n                    </Col>\n                    <Col xs={2}>\n                      <Button\n                        variant=\"success\"\n                        onClick={() => {\n                          this.handleSubmit();\n                        }}\n                        disabled={\n                          !this.state.email ||\n                          !this.state.password ||\n                          !this.checkValidEmail(this.state.email)\n                        }\n                      >\n                        login\n                      </Button>\n                      <Button\n                        variant=\"success\"\n                        onClick={() => {\n                          this.handleSubmit();\n                        }}\n                        disabled={\n                          !this.state.email ||\n                          !this.state.password ||\n                          !this.checkValidEmail(this.state.email)\n                        }\n                      >\n                        test\n                      </Button>\n                    </Col>\n                  </Row>\n                </Form>\n              ) : this.state.displayBurger ? (\n                <div\n                  style={{\n                    display: \"flex\",\n                    flexDirection: \"row\",\n                    alignItems: \"center\"\n                  }}\n                >\n                  <div\n                    className=\"navlink\"\n                    style={{ marginRight: \"20px\" }}\n                    onClick={() =>\n                      this.setState({ openModalUserRequest: true })\n                    }\n                  >\n                    my resquest\n                  </div>\n                  <div\n                    className=\"navlink\"\n                    onClick={() => this.setState({ openModal: true })}\n                  >\n                    create request\n                  </div>\n                  <div\n                    className=\"navlink\"\n                    style={{ marginLeft: \"20px\" }}\n                    onClick={async () => {\n                      await localStorage.clear();\n                      this.setState({ email: \"\", password: \"\" });\n                      this.props.history.push(\"/\");\n                    }}\n                  >\n                    log out\n                  </div>\n                </div>\n              ) : (\n                <Menu className=\"bm-menu-wrap\" right onStateChange={isMenuOpen}>\n                  <div\n                    className=\"menu-item\"\n                    onClick={() => this.setState({ openModal: true })}\n                    style={{ cursor: \"pointer\" }}\n                  >\n                    create request\n                  </div>\n                  <div\n                    className=\"menu-item\"\n                    style={{ marginLeft: \"20px\", cursor: \"pointer\" }}\n                    onClick={async () => {\n                      await localStorage.clear();\n                      this.setState({ email: \"\", password: \"\" });\n                      this.props.history.push(\"/\");\n                    }}\n                  >\n                    log out\n                  </div>\n                </Menu>\n              )}\n              {\n                <ModalCreateRequest\n                  show={this.state.openModal}\n                  onHide={() => this.setState({ openModal: false })}\n                  onCloseModal={() => this.setState({ openModal: false })}\n                  userId={localStorage.user_id}\n                />\n              }\n              {\n                <ModalUserRequest\n                  show={this.state.openModalUserRequest}\n                  onHide={() => {\n                    this.setState({ openModalUserRequest: false });\n                  }}\n                  onCloseModal={() => {\n                    this.setState({ openModalUserRequest: false });\n                  }}\n                />\n              }\n            </div>\n          </nav>\n        </header>\n        {this.state.openAlert && (\n          <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n            <Alert\n              variant=\"danger\"\n              onClose={() => this.setState({ openAlert: false })}\n              dismissible\n              style={{ width: \"400px\" }}\n            >\n              <Alert.Heading>Authentification failed</Alert.Heading>\n              <p>Invalid login credentials. Please try again</p>\n            </Alert>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Header);\n"]},"metadata":{},"sourceType":"module"}