{"ast":null,"code":"import _regeneratorRuntime from \"/Users/adotmob/Desktop/volunteers-front/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/adotmob/Desktop/volunteers-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/adotmob/Desktop/volunteers-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/adotmob/Desktop/volunteers-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/adotmob/Desktop/volunteers-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/adotmob/Desktop/volunteers-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/adotmob/Desktop/volunteers-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/adotmob/Desktop/volunteers-front/src/Modal_createRequest/modalRequest.js\";\nimport React, { Component } from \"react\";\nimport { Modal, Button, Form } from \"react-bootstrap\";\nimport { getAddress, submitRequest } from \"../api/backendApi\";\nimport debounce from \"lodash.debounce\";\nimport { withRouter } from \"react-router\";\n\nvar ModalCreateRequest =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ModalCreateRequest, _Component);\n\n  function ModalCreateRequest(props) {\n    var _this;\n\n    _classCallCheck(this, ModalCreateRequest);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ModalCreateRequest).call(this, props));\n\n    _this.handleChangeRequestTitle = function (elem) {\n      _this.setState({\n        requestTitle: elem.target.value\n      });\n    };\n\n    _this.handleChangeDescription = function (elem) {\n      _this.setState({\n        description: elem.target.value\n      });\n    };\n\n    _this.handleChangeAddress = function (elem) {\n      console.log(elem.target.value);\n\n      _this.setState({\n        address: elem.target.value\n      });\n    };\n\n    _this.onBlurAddress = function () {\n      debounce(function () {\n        _this.onSearchAddress(_this.state.address);\n      }, 500)();\n    };\n\n    _this.handleSubmitRequest = function () {\n      var _this$state = _this.state,\n          requestTitle = _this$state.requestTitle,\n          description = _this$state.description,\n          geoObject = _this$state.geoObject,\n          address = _this$state.address;\n      var _localStorage = localStorage,\n          authentication_token = _localStorage.authentication_token,\n          client = _localStorage.client,\n          email = _localStorage.email,\n          user_id = _localStorage.user_id;\n      var form = {\n        title: requestTitle,\n        description: description,\n        geoObject: geoObject,\n        address: address,\n        user_id: user_id\n      };\n      submitRequest(authentication_token, client, email, form);\n      window.location.reload();\n    };\n\n    _this.state = {\n      requestTitle: \"\",\n      address: \"\",\n      description: \"\",\n      userId: _this.props.userId,\n      geoObject: {}\n    };\n    return _this;\n  }\n\n  _createClass(ModalCreateRequest, [{\n    key: \"onSearchAddress\",\n    value: function () {\n      var _onSearchAddress = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(value) {\n        var result, GeoObject;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return getAddress(value);\n\n              case 2:\n                result = _context.sent;\n                GeoObject = result.data.response.GeoObjectCollection.featureMember[0].GeoObject;\n                this.setState({\n                  geoObject: GeoObject\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function onSearchAddress(_x) {\n        return _onSearchAddress.apply(this, arguments);\n      }\n\n      return onSearchAddress;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Modal, {\n        show: this.props.show,\n        onHide: this.props.onHide,\n        size: \"lg\",\n        centered: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \"Create Request\")), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"request-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \"Request title\"), React.createElement(Form.Control, {\n        type: \"text\",\n        placeholder: \"Request title\",\n        onChange: this.handleChangeRequestTitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"address\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"Address\"), React.createElement(\"input\", {\n        placeholder: \"Address\",\n        type: \"text\",\n        onChange: this.handleChangeAddress,\n        onBlur: this.onBlurAddress,\n        className: \"form-control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Description\"), React.createElement(Form.Control, {\n        as: \"textarea\",\n        rows: \"4\",\n        onChange: this.handleChangeDescription,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      })))), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"secondary\",\n        onClick: this.props.onCloseModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Close\"), React.createElement(Button, {\n        variant: \"primary\",\n        onClick: this.handleSubmitRequest,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Submit\")));\n    }\n  }]);\n\n  return ModalCreateRequest;\n}(Component);\n\nexport default withRouter(ModalCreateRequest);","map":{"version":3,"sources":["/Users/adotmob/Desktop/volunteers-front/src/Modal_createRequest/modalRequest.js"],"names":["React","Component","Modal","Button","Form","getAddress","submitRequest","debounce","withRouter","ModalCreateRequest","props","handleChangeRequestTitle","elem","setState","requestTitle","target","value","handleChangeDescription","description","handleChangeAddress","console","log","address","onBlurAddress","onSearchAddress","state","handleSubmitRequest","geoObject","localStorage","authentication_token","client","email","user_id","form","title","window","location","reload","userId","result","GeoObject","data","response","GeoObjectCollection","featureMember","show","onHide","onCloseModal"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Modal, Button, Form } from \"react-bootstrap\";\nimport { getAddress, submitRequest } from \"../api/backendApi\";\nimport debounce from \"lodash.debounce\";\nimport { withRouter } from \"react-router\";\n\nclass ModalCreateRequest extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      requestTitle: \"\",\n      address: \"\",\n      description: \"\",\n      userId: this.props.userId,\n      geoObject: {}\n    };\n  }\n\n  handleChangeRequestTitle = elem => {\n    this.setState({ requestTitle: elem.target.value });\n  };\n  handleChangeDescription = elem => {\n    this.setState({ description: elem.target.value });\n  };\n\n  async onSearchAddress(value) {\n    const result = await getAddress(value);\n    const {\n      GeoObject\n    } = result.data.response.GeoObjectCollection.featureMember[0];\n    this.setState({ geoObject: GeoObject });\n  }\n\n  handleChangeAddress = elem => {\n    console.log(elem.target.value)\n    this.setState({address: elem.target.value})\n  }\n\n  onBlurAddress = () => {\n      debounce(() => {\n        this.onSearchAddress(this.state.address);\n      }, 500)();\n  };\n\n  handleSubmitRequest = () => {\n    const { requestTitle, description, geoObject, address } = this.state;\n    const { authentication_token, client, email, user_id } = localStorage;\n    const form = {\n      title: requestTitle,\n      description,\n      geoObject,\n      address,\n      user_id\n    };\n\n    submitRequest(authentication_token, client, email, form);\n    window.location.reload()\n  };\n\n  render() {\n    return (\n      <Modal\n        show={this.props.show}\n        onHide={this.props.onHide}\n        size=\"lg\"\n        centered\n      >\n        <Modal.Header closeButton>\n          <Modal.Title>Create Request</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Form>\n            <Form.Group controlId=\"request-title\">\n              <Form.Label>Request title</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Request title\"\n                onChange={this.handleChangeRequestTitle}\n              />\n            </Form.Group>\n            <Form.Group controlId=\"address\">\n              <Form.Label>Address</Form.Label>\n              <input\n                placeholder={\"Address\"}\n                type=\"text\"\n                onChange={this.handleChangeAddress}\n                onBlur={this.onBlurAddress}\n                className=\"form-control\"\n              />\n            </Form.Group>\n            <Form.Group controlId=\"description\">\n              <Form.Label>Description</Form.Label>\n              <Form.Control\n                as=\"textarea\"\n                rows=\"4\"\n                onChange={this.handleChangeDescription}\n              />\n            </Form.Group>\n          </Form>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={this.props.onCloseModal}>\n            Close\n          </Button>\n          <Button variant=\"primary\" onClick={this.handleSubmitRequest}>\n            Submit\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n\nexport default withRouter(ModalCreateRequest);\n"]},"metadata":{},"sourceType":"module"}