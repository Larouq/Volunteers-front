{"ast":null,"code":"import _regeneratorRuntime from \"/Users/adotmob/Desktop/volunteers-front/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/adotmob/Desktop/volunteers-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/adotmob/Desktop/volunteers-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/adotmob/Desktop/volunteers-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/adotmob/Desktop/volunteers-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/adotmob/Desktop/volunteers-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/adotmob/Desktop/volunteers-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/adotmob/Desktop/volunteers-front/src/Modal_createRequest/modalRequest.js\";\nimport React, { Component } from \"react\";\nimport { Modal, Button, Form, Alert } from \"react-bootstrap\";\nimport { getAddress, submitRequest } from \"../api/backendApi\";\nimport debounce from \"lodash.debounce\";\nimport { withRouter } from \"react-router\";\n\nvar ModalCreateRequest =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ModalCreateRequest, _Component);\n\n  function ModalCreateRequest(props) {\n    var _this;\n\n    _classCallCheck(this, ModalCreateRequest);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ModalCreateRequest).call(this, props));\n\n    _this.handleChangeRequestTitle = function (elem) {\n      _this.setState({\n        requestTitle: elem.target.value\n      });\n    };\n\n    _this.handleChangeDescription = function (elem) {\n      _this.setState({\n        description: elem.target.value\n      });\n    };\n\n    _this.handleChangeAddress = function (elem) {\n      _this.setState({\n        address: elem.target.value\n      });\n    };\n\n    _this.onBlurAddress = function () {\n      if (_this.state.address.length < 0) console.log(\"here\");\n      debounce(function () {\n        _this.onSearchAddress(_this.state.address);\n      }, 500)();\n    };\n\n    _this.handleSubmitRequest = function () {\n      var _this$state = _this.state,\n          requestTitle = _this$state.requestTitle,\n          description = _this$state.description,\n          geoObject = _this$state.geoObject,\n          address = _this$state.address;\n      var _localStorage = localStorage,\n          authentication_token = _localStorage.authentication_token,\n          client = _localStorage.client,\n          email = _localStorage.email,\n          user_id = _localStorage.user_id;\n      var form = {\n        title: requestTitle,\n        description: description,\n        geoObject: geoObject,\n        address: address,\n        user_id: user_id\n      };\n      submitRequest(authentication_token, client, email, form);\n      window.location.reload();\n    };\n\n    _this.state = {\n      requestTitle: \"\",\n      address: \"\",\n      description: \"\",\n      userId: _this.props.userId,\n      geoObject: {},\n      openAlert: false\n    };\n    return _this;\n  }\n\n  _createClass(ModalCreateRequest, [{\n    key: \"onSearchAddress\",\n    value: function () {\n      var _onSearchAddress = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(value) {\n        var result, GeoObject;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return getAddress(value);\n\n              case 2:\n                result = _context.sent;\n                if (result.status === 400) this.setState({\n                  openAlert: true\n                });else {\n                  GeoObject = result.data.response.GeoObjectCollection.featureMember[0].GeoObject;\n                  this.setState({\n                    geoObject: GeoObject\n                  });\n                }\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function onSearchAddress(_x) {\n        return _onSearchAddress.apply(this, arguments);\n      }\n\n      return onSearchAddress;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Modal, {\n        show: this.props.show,\n        onHide: this.props.onHide,\n        size: \"lg\",\n        centered: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, this.state.openAlert && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(Alert, {\n        variant: \"danger\",\n        onClose: function onClose() {\n          return _this2.setState({\n            openAlert: false\n          });\n        },\n        dismissible: true,\n        style: {\n          width: \"400px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(Alert.Heading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"Authentification failed\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"Invalid address. Please try again\"))), React.createElement(Modal.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Create Request\")), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"request-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"Request title\"), React.createElement(Form.Control, {\n        type: \"text\",\n        placeholder: \"Request title\",\n        onChange: this.handleChangeRequestTitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"address\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Address\"), React.createElement(\"input\", {\n        placeholder: \"Address\",\n        type: \"text\",\n        onChange: this.handleChangeAddress,\n        onBlur: this.onBlurAddress,\n        className: \"form-control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Description\"), React.createElement(Form.Control, {\n        as: \"textarea\",\n        rows: \"4\",\n        onChange: this.handleChangeDescription,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      })))), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"secondary\",\n        onClick: this.props.onCloseModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Close\"), React.createElement(Button, {\n        variant: \"primary\",\n        onClick: this.handleSubmitRequest,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Submit\")));\n    }\n  }]);\n\n  return ModalCreateRequest;\n}(Component);\n\nexport default withRouter(ModalCreateRequest);","map":{"version":3,"sources":["/Users/adotmob/Desktop/volunteers-front/src/Modal_createRequest/modalRequest.js"],"names":["React","Component","Modal","Button","Form","Alert","getAddress","submitRequest","debounce","withRouter","ModalCreateRequest","props","handleChangeRequestTitle","elem","setState","requestTitle","target","value","handleChangeDescription","description","handleChangeAddress","address","onBlurAddress","state","length","console","log","onSearchAddress","handleSubmitRequest","geoObject","localStorage","authentication_token","client","email","user_id","form","title","window","location","reload","userId","openAlert","result","status","GeoObject","data","response","GeoObjectCollection","featureMember","show","onHide","width","onCloseModal"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Modal, Button, Form, Alert } from \"react-bootstrap\";\nimport { getAddress, submitRequest } from \"../api/backendApi\";\nimport debounce from \"lodash.debounce\";\nimport { withRouter } from \"react-router\";\n\nclass ModalCreateRequest extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      requestTitle: \"\",\n      address: \"\",\n      description: \"\",\n      userId: this.props.userId,\n      geoObject: {},\n      openAlert: false\n    };\n  }\n\n  handleChangeRequestTitle = elem => {\n    this.setState({ requestTitle: elem.target.value });\n  };\n  handleChangeDescription = elem => {\n    this.setState({ description: elem.target.value });\n  };\n\n  async onSearchAddress(value) {\n    const result = await getAddress(value);\n    if (result.status === 400) this.setState({ openAlert: true });\n    else {\n      const {\n        GeoObject\n      } = result.data.response.GeoObjectCollection.featureMember[0];\n      this.setState({ geoObject: GeoObject });\n    }\n  }\n\n  handleChangeAddress = elem => {\n    this.setState({ address: elem.target.value });\n  };\n\n  onBlurAddress = () => {\n    if (this.state.address.length < 0) console.log(\"here\");\n    debounce(() => {\n      this.onSearchAddress(this.state.address);\n    }, 500)();\n  };\n\n  handleSubmitRequest = () => {\n    const { requestTitle, description, geoObject, address } = this.state;\n    const { authentication_token, client, email, user_id } = localStorage;\n    const form = {\n      title: requestTitle,\n      description,\n      geoObject,\n      address,\n      user_id\n    };\n\n    submitRequest(authentication_token, client, email, form);\n    window.location.reload();\n  };\n\n  render() {\n    return (\n      <Modal\n        show={this.props.show}\n        onHide={this.props.onHide}\n        size=\"lg\"\n        centered\n      >\n        <Modal.Header closeButton>\n          {this.state.openAlert && (\n            <div >\n              <Alert\n                variant=\"danger\"\n                onClose={() => this.setState({ openAlert: false })}\n                dismissible\n                style={{ width: \"400px\" }}\n              >\n                <Alert.Heading>Authentification failed</Alert.Heading>\n                <p>Invalid address. Please try again</p>\n              </Alert>\n            </div>\n          )}\n          <Modal.Title>Create Request</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Form>\n            <Form.Group controlId=\"request-title\">\n              <Form.Label>Request title</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Request title\"\n                onChange={this.handleChangeRequestTitle}\n              />\n            </Form.Group>\n            <Form.Group controlId=\"address\">\n              <Form.Label>Address</Form.Label>\n              <input\n                placeholder={\"Address\"}\n                type=\"text\"\n                onChange={this.handleChangeAddress}\n                onBlur={this.onBlurAddress}\n                className=\"form-control\"\n              />\n            </Form.Group>\n            <Form.Group controlId=\"description\">\n              <Form.Label>Description</Form.Label>\n              <Form.Control\n                as=\"textarea\"\n                rows=\"4\"\n                onChange={this.handleChangeDescription}\n              />\n            </Form.Group>\n          </Form>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={this.props.onCloseModal}>\n            Close\n          </Button>\n          <Button variant=\"primary\" onClick={this.handleSubmitRequest}>\n            Submit\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n\nexport default withRouter(ModalCreateRequest);\n"]},"metadata":{},"sourceType":"module"}