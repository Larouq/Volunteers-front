{"ast":null,"code":"// depend on jsts for now https://github.com/bjornharrtell/jsts/blob/master/examples/overlay.html\nvar jsts = require('jsts');\n/**\n * Takes two {@link Polygon|polygons} and finds their intersection. If they share a border, returns the border; if they don't intersect, returns undefined.\n *\n * @name intersect\n * @param {Feature<Polygon>} poly1 the first polygon\n * @param {Feature<Polygon>} poly2 the second polygon\n * @return {(Feature<Polygon>|undefined|Feature<MultiLineString>)} if `poly1` and `poly2` overlap, returns a Polygon feature representing the area they overlap; if `poly1` and `poly2` do not overlap, returns `undefined`; if `poly1` and `poly2` share a border, a MultiLineString of the locations where their borders are shared\n * @example\n * var poly1 = {\n *   \"type\": \"Feature\",\n *   \"properties\": {\n *     \"fill\": \"#0f0\"\n *   },\n *   \"geometry\": {\n *     \"type\": \"Polygon\",\n *     \"coordinates\": [[\n *       [-122.801742, 45.48565],\n *       [-122.801742, 45.60491],\n *       [-122.584762, 45.60491],\n *       [-122.584762, 45.48565],\n *       [-122.801742, 45.48565]\n *     ]]\n *   }\n * }\n * var poly2 = {\n *   \"type\": \"Feature\",\n *   \"properties\": {\n *     \"fill\": \"#00f\"\n *   },\n *   \"geometry\": {\n *     \"type\": \"Polygon\",\n *     \"coordinates\": [[\n *       [-122.520217, 45.535693],\n *       [-122.64038, 45.553967],\n *       [-122.720031, 45.526554],\n *       [-122.669906, 45.507309],\n *       [-122.723464, 45.446643],\n *       [-122.532577, 45.408574],\n *       [-122.487258, 45.477466],\n *       [-122.520217, 45.535693]\n *     ]]\n *   }\n * }\n *\n * var polygons = {\n *   \"type\": \"FeatureCollection\",\n *   \"features\": [poly1, poly2]\n * };\n *\n * var intersection = turf.intersect(poly1, poly2);\n *\n * //=polygons\n *\n * //=intersection\n */\n\n\nmodule.exports = function intersect(poly1, poly2) {\n  var geom1, geom2;\n  if (poly1.type === 'Feature') geom1 = poly1.geometry;else geom1 = poly1;\n  if (poly2.type === 'Feature') geom2 = poly2.geometry;else geom2 = poly2;\n  var reader = new jsts.io.GeoJSONReader();\n  var a = reader.read(JSON.stringify(geom1));\n  var b = reader.read(JSON.stringify(geom2));\n  var intersection = a.intersection(b);\n\n  if (intersection.isEmpty()) {\n    return undefined;\n  }\n\n  var writer = new jsts.io.GeoJSONWriter();\n  var geojsonGeometry = writer.write(intersection);\n  return {\n    type: 'Feature',\n    properties: {},\n    geometry: geojsonGeometry\n  };\n};","map":null,"metadata":{},"sourceType":"script"}