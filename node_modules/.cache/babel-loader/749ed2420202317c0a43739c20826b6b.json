{"ast":null,"code":"import _regeneratorRuntime from \"/Users/adotmob/Desktop/volunteers-front/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/adotmob/Desktop/volunteers-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from \"axios\";\nvar BACKEND_API_URL = \"http://localhost:3000\";\nvar YANDEX_API = \"2e846d9f-4492-4c1d-b01a-fcb4810766c7\";\nexport function submitRegistration(_x) {\n  return _submitRegistration.apply(this, arguments);\n}\n\nfunction _submitRegistration() {\n  _submitRegistration = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(form) {\n    var email, password, firstName, lastName, params, results;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            email = form.email, password = form.password, firstName = form.firstName, lastName = form.lastName;\n            _context.prev = 1;\n            params = {\n              email: email,\n              password: password,\n              name: lastName,\n              nickname: firstName\n            };\n            _context.next = 5;\n            return axios.post(\"\".concat(BACKEND_API_URL, \"/auth\"), params);\n\n          case 5:\n            results = _context.sent;\n            localStorage.setItem(\"authentication_token\", results.headers[\"access-token\"]);\n            localStorage.setItem(\"email\", email);\n            localStorage.setItem(\"user_id\", results.data.data[\"id\"]);\n            localStorage.setItem(\"client\", results.headers[\"client\"]);\n            return _context.abrupt(\"return\", results);\n\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](1);\n            alert(new Error(\"registration failed please change password or email.\"));\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 13]]);\n  }));\n  return _submitRegistration.apply(this, arguments);\n}\n\nexport function submitAuthentification(_x2) {\n  return _submitAuthentification.apply(this, arguments);\n}\n\nfunction _submitAuthentification() {\n  _submitAuthentification = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(form) {\n    var email, password, params, results;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            email = form.email, password = form.password;\n            _context2.prev = 1;\n            params = {\n              email: email,\n              password: password\n            };\n            _context2.next = 5;\n            return axios.post(\"\".concat(BACKEND_API_URL, \"/auth/sign_in\"), params);\n\n          case 5:\n            results = _context2.sent;\n            localStorage.setItem(\"authentication_token\", results.headers[\"access-token\"]);\n            localStorage.setItem(\"email\", email);\n            localStorage.setItem(\"user_id\", results.data.data[\"id\"]);\n            localStorage.setItem(\"client\", results.headers[\"client\"]);\n            return _context2.abrupt(\"return\", results);\n\n          case 13:\n            _context2.prev = 13;\n            _context2.t0 = _context2[\"catch\"](1);\n            return _context2.abrupt(\"return\", _context2.t0.response);\n\n          case 16:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[1, 13]]);\n  }));\n  return _submitAuthentification.apply(this, arguments);\n}\n\nexport function fetchRequests(_x3, _x4, _x5) {\n  return _fetchRequests.apply(this, arguments);\n}\n\nfunction _fetchRequests() {\n  _fetchRequests = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(access_token, client, uid) {\n    var results;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return axios.get(\"\".concat(BACKEND_API_URL, \"/requests\"), {\n              headers: {\n                \"access-token\": access_token,\n                client: client,\n                uid: uid\n              }\n            });\n\n          case 3:\n            results = _context3.sent;\n            return _context3.abrupt(\"return\", results.data);\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](0);\n            alert(new Error(\"backend API request failed\"));\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[0, 7]]);\n  }));\n  return _fetchRequests.apply(this, arguments);\n}\n\nexport function submitRequest(_x6, _x7, _x8, _x9) {\n  return _submitRequest.apply(this, arguments);\n}\n\nfunction _submitRequest() {\n  _submitRequest = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4(access_token, client, uid, form) {\n    var title, description, address;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            title = form.title, description = form.description, address = form.address;\n            console.log(access_token, client, uid, form); // try {\n            //   const params = {\n            //     title,\n            //     description,\n            //     address\n            //   };\n            //   const results = await axios.post(\n            //     `${BACKEND_API_URL}/requests`,\n            //     {\n            //       headers: {\n            //         \"access-token\": access_token,\n            //         client: client,\n            //         uid: uid\n            //       }\n            //     },\n            //     params\n            //   );\n            //   return results;\n            // } catch (error) {\n            //   return error.response;\n            // }\n\n          case 2:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _submitRequest.apply(this, arguments);\n}\n\nexport function getAddress(_x10) {\n  return _getAddress.apply(this, arguments);\n}\n\nfunction _getAddress() {\n  _getAddress = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee5(city) {\n    var result;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.prev = 0;\n            _context5.next = 3;\n            return axios.get(\"https://geocode-maps.yandex.ru/1.x/?format=json&apikey=\".concat(YANDEX_API, \"&geocode=\").concat(city, \"&lang=en-US\"));\n\n          case 3:\n            result = _context5.sent;\n            return _context5.abrupt(\"return\", result);\n\n          case 7:\n            _context5.prev = 7;\n            _context5.t0 = _context5[\"catch\"](0);\n            return _context5.abrupt(\"return\", _context5.t0);\n\n          case 10:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5, null, [[0, 7]]);\n  }));\n  return _getAddress.apply(this, arguments);\n}\n\nexport default {\n  submitRegistration: submitRegistration,\n  submitAuthentification: submitAuthentification,\n  fetchRequests: fetchRequests,\n  submitRequest: submitRequest,\n  getAddress: getAddress\n};","map":{"version":3,"sources":["/Users/adotmob/Desktop/volunteers-front/src/api/backendApi.js"],"names":["axios","BACKEND_API_URL","YANDEX_API","submitRegistration","form","email","password","firstName","lastName","params","name","nickname","post","results","localStorage","setItem","headers","data","alert","Error","submitAuthentification","response","fetchRequests","access_token","client","uid","get","submitRequest","title","description","address","console","log","getAddress","city","result"],"mappings":"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","sourcesContent":["import axios from \"axios\";\n\nconst BACKEND_API_URL = \"http://localhost:3000\";\nconst YANDEX_API = \"2e846d9f-4492-4c1d-b01a-fcb4810766c7\"\n\nexport async function submitRegistration(form) {\n  const { email, password, firstName, lastName } = form;\n  try {\n    const params = {\n      email,\n      password,\n      name: lastName,\n      nickname: firstName\n    };\n    const results = await axios.post(`${BACKEND_API_URL}/auth`, params);\n    localStorage.setItem(\n      \"authentication_token\",\n      results.headers[\"access-token\"]\n    );\n    localStorage.setItem(\"email\", email);\n    localStorage.setItem(\"user_id\", results.data.data[\"id\"]);\n    localStorage.setItem(\"client\", results.headers[\"client\"]);\n    return results;\n  } catch (error) {\n    alert(new Error(\"registration failed please change password or email.\"));\n  }\n}\n\nexport async function submitAuthentification(form) {\n  const { email, password } = form;\n  try {\n    const params = {\n      email,\n      password\n    };\n    const results = await axios.post(`${BACKEND_API_URL}/auth/sign_in`, params);\n    localStorage.setItem(\n      \"authentication_token\",\n      results.headers[\"access-token\"]\n    );\n    localStorage.setItem(\"email\", email);\n    localStorage.setItem(\"user_id\", results.data.data[\"id\"]);\n    localStorage.setItem(\"client\", results.headers[\"client\"]);\n    return results;\n  } catch (error) {\n    return error.response;\n  }\n}\n\nexport async function fetchRequests(access_token, client, uid) {\n  try {\n    const results = await axios.get(`${BACKEND_API_URL}/requests`, {\n      headers: {\n        \"access-token\": access_token,\n        client: client,\n        uid: uid\n      }\n    });\n    return results.data;\n  } catch (error) {\n    alert(new Error(\"backend API request failed\"));\n  }\n}\n\nexport async function submitRequest(access_token, client, uid, form) {\n  const { title, description, address } = form;\n  console.log(access_token, client, uid, form)\n  // try {\n  //   const params = {\n  //     title,\n  //     description,\n  //     address\n  //   };\n  //   const results = await axios.post(\n  //     `${BACKEND_API_URL}/requests`,\n  //     {\n  //       headers: {\n  //         \"access-token\": access_token,\n  //         client: client,\n  //         uid: uid\n  //       }\n  //     },\n  //     params\n  //   );\n  //   return results;\n  // } catch (error) {\n  //   return error.response;\n  // }\n}\n\nexport async function getAddress(city) {\n  try {\n    const result = await axios.get(\n      `https://geocode-maps.yandex.ru/1.x/?format=json&apikey=${YANDEX_API}&geocode=${city}&lang=en-US`\n    );\n    return result;\n  } catch (error) {\n    return error;\n  }\n}\n\nexport default {\n  submitRegistration,\n  submitAuthentification,\n  fetchRequests,\n  submitRequest,\n  getAddress\n};\n"]},"metadata":{},"sourceType":"module"}